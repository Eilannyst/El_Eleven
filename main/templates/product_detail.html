{% extends 'base.html' %}
{% block page_title %}{{ product.name }} Detail{% endblock page_title %}

{% block content %}
<div class="bg-gray-50 min-h-screen pt-16 pb-10">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

    <div class="mb-6">
      <a href="{% url 'main:show_main' %}" class="text-gray-600 hover:text-gray-900 font-medium transition-colors">
        ← Return to Product List
      </a>
    </div>

    <div class="bg-white rounded-lg shadow-md overflow-hidden flex flex-col md:flex-row gap-6 p-6">
      
      <div class="md:w-1/2 flex items-center justify-center">
        {% if product.thumbnail %}
          <img src="{{ product.thumbnail }}" alt="{{ product.name }}" class="rounded-lg w-full h-auto object-cover max-h-[400px]">
        {% else %}
          <div class="w-full h-64 bg-gray-200 flex items-center justify-center rounded-lg text-gray-500">
            <span class="text-lg">No Image</span>
          </div>
        {% endif %}
      </div>

      <div class="md:w-1/2 flex flex-col justify-between">
        <div>
          <h1 class="text-3xl font-bold text-gray-900 mb-3">{{ product.name }}</h1>
          
          <div class="flex items-center space-x-4 text-gray-600 mb-3">
            <span class="px-2 py-1 bg-blue-600 text-white rounded text-sm">{{ product.category }}</span>
            {% if product.is_featured %}
              <span class="px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-sm">Featured</span>
            {% endif %}
          </div>

          <p class="text-xl text-gray-800 font-semibold mb-3">Rp {{ product.price|floatformat:0 }}</p>

          <p class="text-gray-700 mb-4"><b>Deskripsi:</b></p>
          <p class="text-gray-600 mb-4">{{ product.description }}</p>

          <p class="text-gray-500 text-sm">
            <b>Dibuat oleh:</b> {{ product.user.username|default:"Anonymous" }}<br>
            <b>Ditambahkan pada:</b> {{ product.created_at|date:"d M Y, H:i" }}
          </p>
        </div>

        {% if user.is_authenticated and product.user.id == user.id %}
        <div class="mt-6 flex space-x-3">
          <a href="{% url 'main:edit_product' product.id %}" 
             class="px-4 py-2 bg-grey-500 text-white rounded-md hover:bg-grey-600 transition-colors">
            ✏️ Edit
          </a>
          <form action="{% url 'main:delete_product' product.id %}" method="post" onsubmit="return confirm('Apakah Anda yakin ingin menghapus produk {{ product.name }}?');">
            {% csrf_token %}
            <button type="submit" class="px-4 py-2 bg-grey-600 text-white rounded-md hover:bg-grey-700 transition-colors">
              🗑️ Delete
            </button>
          </form>
        </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock content %}
